<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="icon" type="image/png" href="../images/everyone.svg" />
    <title>Inclusive development</title>
  </head>

  <nav>
    <ul role="navigation">
      <li tabindex="0" class="key-nav" id="skip_to_content">
        <a href="#main_content">Skip to main content</a>
      </li>
      <li tabindex="0" class="key-nav">
        <a href="/">Home </a><i class="fas fa-home" aria-hidden="true"></i>
      </li>
      <li tabindex="0" class="key-nav">
        <a href="../pages/about.html">About me </a
        ><i class="far fa-address-card" aria-hidden="true"></i>
      </li>
      <li tabindex="0" class="key-nav" id="current-page">
        <a href="../pages/inclusive.html" aria-current="page"
          >Inclusive development </a
        ><i class="fas fa-user-check" aria-hidden="true"></i>
      </li>
      <li tabindex="0" class="key-nav">
        <a href="../pages/tools.html">Digital health </a
        ><i class="fas fa-spa" aria-hidden="true"></i>
      </li>
      <li tabindex="0" class="key-nav">
        <a href="../pages/settings.html">Settings </a
        ><i class="fas fa-cog" aria-hidden="true"></i>
      </li>
    </ul>
  </nav>

  <body>
    <div class="inclusive-container">
      <h1 id="main_content">Inclusive development</h1>
      <h2>Important factors:</h2>
      <div class="factor-container">
        <a href="#digital-section" class="inclusive-link"
          ><div class="digital-inclusion" tabindex="0">
            <header>Digital inclusion</header>
            <img
              src="../images/digi.svg"
              class="factor-img"
              id="digi_icon"
              alt="digital inclusion icon"
            /></div
        ></a>
        <a href="#visual-section" class="inclusive-link">
          <div class="visual-impairment" tabindex="0">
            <header>Visual Impairment</header>
            <img
              src="../images/visual.svg"
              class="factor-img"
              id="visual_icon"
              alt="visual impairment icon"
            /></div
        ></a>
        <a href="#neuro-section" class="inclusive-link"
          ><div class="neurodiversity" tabindex="0">
            <header>Neurodiversity</header>
            <img
              src="../images/neuro.svg"
              class="factor-img"
              id="neuro_icon"
              alt="neurodiversity icon"
            /></div
        ></a>
        <a href="#physical-section" class="inclusive-link"
          ><div class="physical-health-and-ability" tabindex="0">
            <header>Physical health and ability</header>
            <img
              src="../images/hand.svg"
              class="factor-img"
              id="hand_icon"
              alt="physical health and ability icon"
            /></div
        ></a>
        <a href="#language-section" class="inclusive-link"
          ><div class="language" tabindex="0">
            <header>Language</header>
            <img
              src="../images/language.svg"
              class="factor-img"
              id="language_icon"
              alt="language icon"
            /></div
        ></a>
        <a href="#community-section" class="inclusive-link"
          ><div class="community-diversity" tabindex="0">
            <header>Community diversity</header>
            <img
              src="../images/diversity.svg"
              class="factor-img"
              id="diversity_icon"
              alt="culural diversity icon"
            /></div
        ></a>
      </div>

      <section id="digital-section" tabindex="0">
        <h3>Digital inclusion</h3>
        <p>
          Digital inclusion involves making your application accessible to
          people who lack confidence online and do not have advanced digital
          skills, or users that don't have access to the latest devices,
          up-to-date browsers or fast internet speeds.
        </p>
        <button class="scroll-top">Scroll to top</button>
      </section>

      <section id="visual-section" tabindex="0">
        <h3>Visual impairment</h3>
        <p>
          Many people who visit your website will have a type of visual
          impairment or disturbance, this includes colour blindness, sight loss
          or partial sight. Web designs should convey their functionality to
          users with different types of colour vision deficiency or those who
          have difficulty seeing content with low contrast. Logical ordering,
          semantic HTML and descriptive 'alternative' text are an absolute must
          for screen readers.
        </p>
        <button class="scroll-top" tabindex="0">Scroll to top</button>
      </section>

      <section id="neuro-section" tabindex="0">
        <h3>Neurodiversity</h3>
        <p>
          Neurodiversity is a broad term that encourages everyone to acknowledge
          and understand that people process information differently. Sites
          should be built with accessible typography and colour themes by
          default. However, as the 'diversity' part of neurodiversity suggests,
          what is clear and readable for one person might be confusing or
          distracting to someone else. For instance some people might enjoy
          elaborate page transitions and movement on the page while others could
          find vibrant flashing animations uncomfortable or overwhelming.
        </p>
        <p>The solution is to offer choice.</p>
        <p>
          CSS variables and JavaScript make it possible to provide a set of
          styling options and the opportunty to enable and disable certain
          features. Giving people control over their experience is something
          that is typically limited to desktop applications but it doesn't have
          to be this way!
        </p>
        <button class="scroll-top">Scroll to top</button>
      </section>

      <section id="physical-section" tabindex="0">
        <h3>Physical health and ability</h3>
        <p>
          An indvidual's physical health and ability will influence how they
          will browse the web and interact online. Many people navigate using
          the keyboard and will tab through the webpage instead of using the
          mouse. Others will navigate handsfree using a voice controller.
        </p>
        <p>
          Ensure that all core functionality is accessible via the keyboard and
          provide different styling when elements are keyboard focused. Consider
          a 'skip to main' link in your navigation bar to save users from
          repetitive tabbing. Always give people enough time when filling out
          forms or asking for user input.
        </p>
        <button class="scroll-top">Scroll to top</button>
      </section>

      <section id="language-section" tabindex="0">
        <h3>Language</h3>
        <p>
          English is a very widely spoken language, but it's not the only one!
          Internationalisation (also known as i18n) is the practice of
          increasing the accessibility of your website by providing translation
          and country specific date, currency and measurement unit options.
          Translation can be achieved with JavaScript libraries or tools offered
          by external API's such as Google translate. At a very minimum web
          developers should write clear semantic html which will allow browser
          extensions or translation tools to work properly.
        </p>
        <div id="google_translate_element"></div>
        <button class="scroll-top">Scroll to top</button>
      </section>

      <section id="community-section" tabindex="0">
        <h3>Community diversity</h3>
        <p>
          One of the great things about the internet is that it brings an
          incredibly diverse community of people together from around the world.
          If your web application is successful you could have thousands of
          users visiting your site every day.
        </p>
        <p>
          Designers sometimes use 'Personas' or user profiles to guide how
          things should look and feel for their target audience. I'm sure there
          are some specific use cases for this approach but here i'm going to
          turn the concept on it's head by presenting to you an inclusive
          persona generator so you can ask yourself whether your site really is
          accesible for all.
        </p>
        <button id="random_user_btn">Generate random user</button>
        <div>
          <p id="user_properties"></p>
        </div>
        <button class="scroll-top">Scroll to top</button>
      </section>
    </div>

    <footer>
      <p>
        <span><i id="github-icon" class="fab fa-github"></i></span>DuckRabbitPy
      </p>
    </footer>
    <script src="../app.js"></script>
    <script>
      //page specific JavaScript
      const neuroSvg = document.getElementById("neuro_icon");
      const handSvg = document.getElementById("hand_icon");
      const languageSvg = document.getElementById("language_icon");
      const diversitySvg = document.getElementById("diversity_icon");
      const visualSvg = document.getElementById("visual_icon");
      const digitalSvg = document.getElementById("digi_icon");

      const randomUserBtn = document.getElementById("random_user_btn");
      const userProperties = document.getElementById("user_properties");

      randomUserBtn.addEventListener("click", () => {
        createUser();
      });

      function retrieveIconSvgTheme() {
        let storedTheme = sessionStorage.getItem("storedColour");

        //think about if can be done by mapping over node list
        if (storedTheme === "dark-theme") {
          neuroSvg.src = "/images/neuroDarkTheme.svg";
          handSvg.src = "/images/handDarkTheme.svg";
          languageSvg.src = "/images/languageDarkTheme.svg";
          diversitySvg.src = "/images/diversityDarkTheme.svg";
          visualSvg.src = "/images/visualDarkTheme.svg";
          digitalSvg.src = "/images/digiDarkTheme.svg";
        } else {
          neuroSvg.src = "/images/neuro.svg";
          handSvg.src = "/images/hand.svg";
          languageSvg.src = "/images/language.svg";
          diversitySvg.src = "/images/diversity.svg";
          visualSvg.src = "/images/visual.svg";
          digitalSvg.src = "/images/digi.svg";
        }
      }

      retrieveIconSvgTheme();

      //random user generator

      let user = {
        Name: "not set",
        Age: "not set",
        MainDevice: "not set",
        InternetSpeed: "not set",
        PreferredLanguage: "not set",
        CurrentlyLivingIn: "not set",
        AccessibilityConsideration: "not set",

        async randName() {
          let nameData = await fetchData("names");
          return nameData[Math.floor(Math.random() * nameData.length)]
            .first_name;
        },

        async randLanguage() {
          if (Math.random() > 0.3) {
            let languageData = await fetchData("language");
            return languageData[
              Math.floor(Math.random() * languageData.length)
            ];
          } else {
            return "English";
          }
        },

        async randCountry() {
          let countryData = await fetchData("countries");
          return countryData[Math.floor(Math.random() * countryData.length)]
            .name;
        },

        randAge() {
          this.Age = Math.floor(Math.random() * (110 - 12) + 12);
        },

        randInternetSpeed() {
          this.InternetSpeed = `${Math.floor(Math.random() * 150)} mb/s`;
        },

        randDevice() {
          const devices = [
            "cheap laptop",
            "high spec laptop",
            "macbook",
            "iphone",
            "android phone",
            "gaming PC",
            "old desktop computer",
            "android tablet",
            "ipad",
            "library computer",
          ];
          this.MainDevice = devices[Math.floor(Math.random() * devices.length)];
        },

        randAccessibility() {
          const considerations = [
            "partially sighted and uses screen reader to navigate",
            "dislikes flashing images",
            "struggles with font smaller than 16pt",
            "finds precise tasks with the mouse difficult",
            "has total hearing loss",
            "primariliy uses keyboard to navigate",
            "appeciates high contrast when reading",
            "does not like bright screens",
            "needs more time when typing",
            "finds it hard to concentrate on large blocks of text",
          ];
          this.AccessibilityConsideration =
            considerations[Math.floor(Math.random() * considerations.length)];
        },
      };

      async function fetchData(dataField) {
        let data = await fetch(`../data/${dataField}.json`)
          .then((res) => res.json())
          .catch((err) => {
            throw err;
          });
        return data;
      }

      async function createUser() {
        //create new user object
        let newUser = Object.create(user);

        //call methods that need to collect json for their properties
        let name = await newUser.randName();
        let language = await newUser.randLanguage();
        let country = await newUser.randCountry();

        ////fire synchronous methods to set other properties
        newUser.randAge();
        newUser.randInternetSpeed();
        newUser.randDevice();
        newUser.randAccessibility();

        Promise.all([name, language, country]).then((values) => {
          //once asynch data has been collected, set properties on user object
          newUser.Name = name;
          newUser.PreferredLanguage = language;
          newUser.CurrentlyLivingIn = country;

          userProperties.innerHTML = `Name: ${newUser.Name} 
          <br> Age: ${newUser.Age}
          <br> Currently in: ${newUser.CurrentlyLivingIn}
          <br> Preferred language: ${newUser.PreferredLanguage} <br> Main device: ${newUser.MainDevice} 
          <br> Accessibility consideration: ${newUser.AccessibilityConsideration}`;
        });
      }
    </script>
    <script
      type="text/javascript"
      src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
    ></script>
  </body>
</html>
