<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="icon" type="image/png" href="../images/everyone.svg" />
    <title>Digital health</title>
    <script src="../retrieveSettings.js"></script>
  </head>

  <nav>
    <nav>
      <ul role="navigation">
        <li tabindex="0" class="key-nav" id="skip_to_content">
          <a href="#main_content">Skip to main content</a>
        </li>
        <li tabindex="0" class="key-nav">
          <a href="/">Home </a><i class="fas fa-home" aria-hidden="true"></i>
        </li>
        <li tabindex="0" class="key-nav">
          <a href="../pages/about.html">About me </a
          ><i class="far fa-address-card" aria-hidden="true"></i>
        </li>
        <li tabindex="0" class="key-nav">
          <a href="../pages/inclusive.html">Inclusive development </a
          ><i class="fas fa-user-check" aria-hidden="true"></i>
        </li>
        <li tabindex="0" class="key-nav" id="current_page">
          <a href="../pages/tools.html" aria-current="page"
            >Digital health </a
          ><i class="fas fa-spa" aria-hidden="true"></i>
        </li>
        <li tabindex="0" class="key-nav" >
          <a href="../pages/settings.html" >Settings </a
          ><i class="fas fa-cog" aria-hidden="true"></i>
        </li>
      </ul>
    </nav>

  <body>
    <section class="banner">
      <h1>Digital health</h1>
    </section>
      <div id="main_content" >
        <div class="health-app fade-in-content">

          <div class="View">

            <div class="digi-health-landing fade-in-content">
              <div>
              <h2>Welcome to digital health</h2>
              <p>Sometimes it's hard to know where to start when we're looking to improve or maintain our health.
                One approach is to start with the basics and build from there! This online tool will ask 5 questions
                spanning several key domains deemed crucial for health and wellbeing.
                <br><br>
                Use the slider or keyboard to provide a score of (worst possible) 1 up to 9 (best possible).
                <br><br>
                Once you have completed the brief questionaire you will be directed to a range of resources that might be useful
                based on your response.
              </p>
              <button id="start_quiz">Let's get started!</button>
            </div>
              
            <div>
              <img id="health_landing_img" src="../images/allDomains.svg">
            </div>
            </div>


            <div class="mood-container domain hidden fade-in-content">
            <h3>How has your mood and wellbeing been this week? (Q1/5)</h3>
            <p>Use slider or press key 1 - 9</p>
            <div>
              <input type="range" id="mood_slider" class="slider" name="mood_slider"
                     min="1" max="9" step=1 value=5 list="mood_score">
              <label for="mood_slider">Mood</label>
              <p class="slider-display" id="display_mood"></p>
              <button class="next-btn">Next</button>
              <img class="domain-img" src="../images/mood.svg">
            </div>
            </div>

            <div class="sleep-container domain hidden fade-in-content">
                <h3>How have you been sleeping this week? (Q2/5)</h3>
                <p>Use slider or press key 1 - 9</p>
                <div>
                <input type="range" id="sleep_slider" class="slider" name="sleep_slider"
                       min="1" max="9" step=1 value=5 list="sleep_score">
                <label for="sleep_slider">Sleep</label>
                <p class="slider-display" id="display_sleep"></p>
                <button class="next-btn">Next</button>
                <img class="domain-img" src="../images/owl.svg">
              </div>
            </div>

            <div class="nutrition-container domain hidden fade-in-content">
              <h3>How has your diet been this week? (Q3/5)</h3>
              <p>Use slider or press key 1 - 9</p>
              <div>
                <input type="range" id="nutrition_slider" class="slider" name="nutrition_slider"
                       min="1" max="9" step=1 value=5 list="nutrition_score">
                <label for="nutrition_slider">Nutrition</label>
                <p class="slider-display" id="display_nutrition"></p>
                <button class="next-btn">Next</button>
                <img class="domain-img" src="../images/nutrition.svg">
              </div>
            </div>

            <div class="social-container domain hidden fade-in-content">
              <h3>How socially active have you been this week? (Q4/5)</h3>
              <p>Use slider or press key 1 - 9</p>
              <div>
                <input type="range" id="social_slider" class="slider" name="social_slider"
                       min="1" max="9" step=1 value=5 list="social_score">
                <label for="social_slider">Sociability</label>
                <p class="slider-display" id="display_social"></p>
                <button class="next-btn">Next</button>
                <img class="domain-img" src="../images/social.svg">
              </div>
            </div>

            <div class="exercise-container domain hidden fade-in-content">
              <h3>How fit and active have you been this week? (Q5/5)</h3>
              <p>Use slider or press key 1 - 9</p>
              <div>
                <input type="range" id="exercise_slider" class="slider" name="exercise_slider"
                       min="1" max="9" step=1 value=5 list="exercise_score">
                <label for="exercise_slider">Exercise</label>
                <p class="slider-display" id="display_exercise"></p>
                <button class="next-btn">Next</button>
                <img class="domain-img" src="../images/exercise.svg">
              </div>
            </div>

            <div class="dashboard-container hidden">
              <h3>Digi health dashboard</h3>
            </div>

          </div>
        </div>

      </div>
       
      </div>

      
    </div>
    <footer>
      <p>
        <span><i id="github-icon" class="fab fa-github"></i></span>DuckRabbitPy
      </p>
    </footer>
    <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2Ces2016%2Ces2017%2Ces2018%2Ces2019%2Ces6%2Ces5"></script>
    <script type="text/javascript" src="../app.js"></script>
    <script
    type="text/javascript"
    src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
  ></script>
  <script>
    const domainBtns = document.querySelectorAll(".domain-btn");
    const digiLanding = document.querySelector(".digi-health-landing");

    const currentMood = document.getElementById("mood_slider");
    const displayMood = document.getElementById("display_mood");

    const currentSleep = document.getElementById("sleep_slider");
    const displaySleep = document.getElementById("display_sleep");

    const currentNutrition = document.getElementById("nutrition_slider");
    const displayNutrition = document.getElementById("display_nutrition")

    const currentSocial = document.getElementById("social_slider");
    const displaySocial = document.getElementById("display_social");

    const currentExercise = document.getElementById("exercise_slider");
    const displayExercise = document.getElementById("display_exercise");
    const containers = document.querySelectorAll(".domain");
    const sliders = document.querySelectorAll(".slider");
    const sliderDisplay = document.querySelectorAll(".slider-display")

    const startBtn = document.getElementById("start_quiz")
    const nextBtns = document.querySelectorAll(".next-btn");



    startBtn.addEventListener("click", () => {
      [...containers][0].classList.remove("hidden");
      digiLanding.style.display = "none"


    });

    [...domainBtns].forEach(btn => {
      btn.addEventListener("click", (event) =>{
        let domainPrefix = event.target.id;
        [...containers].forEach(container => {
          let containerClass = container.classList[0];
          if(containerClass.includes(domainPrefix)){
            container.classList.remove("hidden")
          }
          else{container.classList.add("hidden")}
          })  
      }) 
    });

    [...nextBtns].forEach(btn => {
      btn.addEventListener("click", (event) => {
        [...containers].forEach((container, index) => {
          let containerClass = container.classList[0]
          if(containerClass.includes(btn.parentElement.parentNode.classList[0]) && index < 4){
            [...containers][index + 1].classList.remove("hidden");
            [...containers][index].classList.add("hidden");   
          };
          
        })
      })
    })

    document.addEventListener("keydown", (event) => {
      [...sliders].forEach((slider) => {
        let containerClass = slider.parentElement.parentElement.classList[0];
        if (!containerClass.includes("hidden")) {
          slider.value = event.key;
          [...sliderDisplay].forEach((score) => {
            if (containerClass.includes(score.id.slice(8))) {
              score.innerHTML = scoreAndWord(slider.value);
            }
          });
        }
      });
    });


    currentMood.addEventListener("input", () => {
      displayMood.innerHTML = scoreAndWord(currentMood.value)
    })

    currentSleep.addEventListener("input", () => {
      displaySleep.innerHTML = scoreAndWord(currentSleep.value)
    })

    currentNutrition.addEventListener("input", () => {
      displayNutrition.innerHTML = scoreAndWord(currentNutrition.value)
    })

    currentSocial.addEventListener("input", () => {
      displaySocial.innerHTML = scoreAndWord(currentSocial.value)
    })

    currentExercise.addEventListener("input", () => {
      displayExercise.innerHTML = scoreAndWord(currentExercise.value)
    })
    

    function scoreAndWord(score){
      wordEquiv = ["", "the worst it could be", "extremely bad", "very bad", "bad", "Ok", "good", "very good", "excellent", "the best it could be"] 
      return `Score: <b>${score}</b> (${wordEquiv[score]})`
    }

  </script>
  </body>
</html>
